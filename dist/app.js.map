{"version":3,"sources":["controls.js","gallery.js","inline.js","app.js"],"names":["Controls","cfg","popup","gallery","moreThanOneImage","light_gallery","length","options","showArrows","undefined","keyboard","mouseAdditionalButtons","addMouseListener","keyBoardListener","wrapper","document","querySelector","arrows","createElement","className","innerHTML","appendChild","addEventListener","ev","target","previousImage","nextImage","close","window","onkeydown","key","keyCode","which","preventDefault","Gallery","querySelectorAll","imageUrl","link","getAttribute","imageWrapper","openedImageNumber","controls","getOpenedImageNumber","createImage","container","addArrows","insertImage","src","fromRight","transformClassName","search","toRight","oldWrapper","setTimeout","remove","iterator","repeatImage","repeatImageNumber","slideToRight","removeImage","nextImg","href","forEach","img","i","Inline","instance","createContainer","hiddenContent","NicePopup","openPopup","bind","hasAttribute","parentElement","config","addWrapper","background","body","removeChild"],"mappings":"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","file":"app.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\nexport class Controls {\r\n   constructor(cfg) {\r\n      this.popup = cfg.popup;\r\n      this.gallery = cfg.gallery;\r\n      this.moreThanOneImage = cfg.gallery ? cfg.gallery.light_gallery.length > 1 : false;\r\n\r\n      this.options = {};\r\n      this.options.showArrows = cfg.options.showArrows === undefined ? true : cfg.options.showArrows;\r\n      this.options.keyboard = cfg.options.keyboard === undefined ? true : cfg.options.keyboard;\r\n      this.options.mouseAdditionalButtons = cfg.options.mouseAdditionalButtons === undefined ? true : cfg.options.mouseAdditionalButtons;\r\n\r\n      if (this.options.mouseAdditionalButtons) {\r\n         this.addMouseListener();\r\n      }\r\n      if (this.options.keyboard) {\r\n         this.keyBoardListener();\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Отобразим стрелки переключения слайдов\r\n    */\r\n   addArrows() {\r\n      if (!this.options.showArrows || !this.moreThanOneImage) {\r\n         return;\r\n      }\r\n      let wrapper = document.querySelector('.nice-image-container');\r\n\r\n      let arrows = document.createElement('div');\r\n      arrows.className = 'nice-image-arrows';\r\n      arrows.innerHTML = `<div class=\"nice-image-arrows-left\">left</div><div class=\"nice-image-arrows-right\">right</div>`;\r\n      wrapper.appendChild(arrows);\r\n\r\n      // Закроем по нажатии на подложку стрелок\r\n      arrows.addEventListener('click', (ev) => {\r\n         switch (ev.target.className) {\r\n            case 'nice-image-arrows-left':\r\n               this.gallery.previousImage();\r\n               break;\r\n            case 'nice-image-arrows-right':\r\n               this.gallery.nextImage();\r\n               break;\r\n            default:\r\n               this.popup.close();\r\n         }\r\n      });\r\n   }\r\n\r\n   /**\r\n    * Переключим слайды по нажатию клавиатуры\r\n    */\r\n   keyBoardListener() {\r\n      window.onkeydown = (ev) => {\r\n         let key = ev.keyCode ? ev.keyCode : ev.which;\r\n\r\n         switch (key) {\r\n            case 37:\r\n               if (this.moreThanOneImage) {\r\n                  this.gallery.previousImage();\r\n               }\r\n               break;\r\n            case 39:\r\n               if (this.moreThanOneImage) {\r\n                  this.gallery.nextImage();\r\n               }\r\n               break;\r\n            case 27:\r\n               this.popup.close();\r\n               break;\r\n         }\r\n      };\r\n   }\r\n\r\n   /**\r\n    * Переключим слайды по нажатию на кнопки мыши\r\n    */\r\n   addMouseListener() {\r\n      document.querySelector('.nice-wrapper').addEventListener('mouseup', (ev) => {\r\n         ev.preventDefault(false);\r\n         let key = ev.keyCode ? ev.keyCode : ev.which;\r\n         switch (key) {\r\n            case 4:\r\n               if (this.moreThanOneImage) {\r\n                  this.gallery.previousImage();\r\n               } else {\r\n                  this.popup.close();\r\n               }\r\n               break;\r\n            case 5:\r\n               if (this.moreThanOneImage) {\r\n                  this.gallery.nextImage();\r\n               }\r\n               break;\r\n         }\r\n      });\r\n   }\r\n}","'use strict';\r\nimport {Controls} from './controls';\r\n\r\nexport class Gallery {\r\n   constructor(cfg) {\r\n      this.light_gallery = document.querySelectorAll('.nice_gallery');\r\n      this.wrapper = document.querySelector('.nice-wrapper');\r\n      this.imageUrl = cfg.link.getAttribute('href');\r\n      this.popup = cfg.popup;\r\n      this.imageWrapper = null;\r\n      this.openedImageNumber = null;\r\n\r\n      this.controls = new Controls({\r\n         gallery: this,\r\n         popup: cfg.popup,\r\n         options: cfg.options\r\n      });\r\n\r\n      this.getOpenedImageNumber(cfg.link);\r\n      this.createImage(this.imageUrl);\r\n   }\r\n\r\n   /**\r\n    * Создадим картинку на подложке\r\n    */\r\n   createImage(imageUrl) {\r\n      let container = document.createElement('div');\r\n      container.className = 'nice-image-container';\r\n\r\n      this.wrapper.appendChild(container);\r\n      this.controls.addArrows();\r\n      this.insertImage(container, imageUrl);\r\n   }\r\n\r\n   /**\r\n    * Вставим в контейнер изображение нужной высоты\r\n    */\r\n   insertImage(container, src, fromRight) {\r\n      let transformClassName;\r\n      switch (fromRight) {\r\n         case true:\r\n            transformClassName = 'nice-animation-right-fadeIn';\r\n            break;\r\n         case false:\r\n            transformClassName = 'nice-animation-left-fadeIn';\r\n            break;\r\n         default:\r\n            transformClassName = '';\r\n      }\r\n\r\n      this.imageWrapper = document.createElement('div');\r\n      this.imageWrapper.className = 'nice-image-wrapper';\r\n      this.imageWrapper.innerHTML = `<img src=\"${src}\" class=\"nice-image ${transformClassName}\">`;\r\n      container.appendChild(this.imageWrapper);\r\n\r\n      this.imageWrapper.addEventListener('click', (ev) => {\r\n         if (ev.target.className.search('nice-image-wrapper') >= 0) {\r\n            this.popup.close();\r\n         }\r\n      });\r\n   }\r\n\r\n   /**\r\n    * Удалим картинку с анимацией\r\n    */\r\n   removeImage(toRight) {\r\n      this.imageWrapper.className += ' oldWrapper';\r\n      let oldWrapper = document.querySelector('.oldWrapper');\r\n      switch(toRight) {\r\n         case true:\r\n            document.querySelector('.nice-image').className = 'nice-image nice-animation-left-fadeOut';\r\n            setTimeout(() => {\r\n               oldWrapper.remove();\r\n            }, 300);\r\n            break;\r\n         case false:\r\n            document.querySelector('.nice-image').className = 'nice-image nice-animation-right-fadeOut';\r\n            setTimeout(() => {\r\n               oldWrapper.remove();\r\n            }, 300);\r\n            break;\r\n         default:\r\n            oldWrapper.remove();\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Откроем следующую картинку\r\n    */\r\n   nextImage(iterator = 1, repeatImage = this.light_gallery[0], repeatImageNumber = 0, slideToRight = true) {\r\n      let container = document.querySelector('.nice-image-container');\r\n\r\n      // Удалим текущую картинку\r\n      this.removeImage(iterator === 1);\r\n\r\n      let nextImg = this.light_gallery[this.openedImageNumber + iterator];\r\n      if (nextImg) {\r\n         this.insertImage(container, nextImg.href, slideToRight);\r\n         this.openedImageNumber = this.openedImageNumber + iterator;\r\n      } else {\r\n         this.insertImage(container, repeatImage, slideToRight);\r\n         this.openedImageNumber = repeatImageNumber;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Откроем предыдущую картинку\r\n    */\r\n   previousImage() {\r\n      this.nextImage(-1, this.light_gallery[this.light_gallery.length - 1], this.light_gallery.length - 1, false);\r\n   }\r\n\r\n   /**\r\n    * Вычислим номер картинки\r\n    */\r\n   getOpenedImageNumber(link) {\r\n      this.light_gallery.forEach((img, i) => {\r\n         if (img.href === link.href) {\r\n            this.openedImageNumber = i;\r\n         }\r\n      })\r\n   }\r\n}","'use strict';\r\n\r\nimport {Controls} from \"./controls\";\r\n\r\nexport class Inline {\r\n   constructor(cfg) {\r\n      this.wrapper = document.querySelector('.nice-wrapper');\r\n      this.popup = cfg.popup;\r\n      this.link = cfg.link;\r\n\r\n      new Controls({\r\n         instance: cfg.instance,\r\n         popup: cfg.popup,\r\n         options: cfg.options\r\n      });\r\n\r\n      this.createContainer();\r\n   }\r\n\r\n   /**\r\n    * Создадим блок-контейнер\r\n    */\r\n   createContainer(imageUrl) {\r\n      let container = document.createElement('div');\r\n      let hiddenContent = document.querySelector(this.link.getAttribute('href')).innerHTML;\r\n      container.className = 'nice-box-container';\r\n      container.innerHTML = `<div class=\"nice-box\">${hiddenContent}</div>`;\r\n\r\n      container.addEventListener('click', (ev) => {\r\n         if (ev.target.className === 'nice-box-container') {\r\n            this.popup.close();\r\n         }\r\n      });\r\n\r\n      this.wrapper.appendChild(container);\r\n   }\r\n}","'use strict';\r\nimport {Gallery} from './gallery';\r\nimport {Inline} from './inline';\r\nimport './app.less'\r\n\r\nexport class NicePopup {\r\n   constructor(cfg) {\r\n      // для ssr если нет window, то не обрабатываем\r\n      if (!window) {\r\n         return;\r\n      }\r\n\r\n      this.cfg = cfg;\r\n      this.wrapper = null;\r\n\r\n      document.addEventListener('click', this.openPopup.bind(this));\r\n   }\r\n\r\n   /**\r\n    * Открытие элемента\r\n    */\r\n   openPopup(ev) {\r\n      let target = ev.target;\r\n      let link = target && target.hasAttribute('data-nice') && target.getAttribute('data-nice');\r\n      if (!link) {\r\n         target = ev.target.parentElement;\r\n         link = target && target.hasAttribute('data-nice') && target.getAttribute('data-nice');\r\n      }\r\n      let config = {\r\n         popup: this,\r\n         link: target,\r\n         options: this.cfg\r\n      };\r\n\r\n      switch(link) {\r\n         case 'gallery':\r\n            this.addWrapper();\r\n            new Gallery(config);\r\n            break;\r\n         case 'inline':\r\n            this.addWrapper();\r\n            new Inline(config);\r\n            break;\r\n         default:\r\n            return;\r\n      }\r\n      ev.preventDefault();\r\n   }\r\n\r\n   /**\r\n    * Добавим подложку\r\n    */\r\n   addWrapper() {\r\n      this.wrapper = document.createElement('div');\r\n      this.wrapper.className = 'nice-wrapper';\r\n\r\n      let background = document.createElement('div');\r\n      background.className = 'nice-wrapper-background';\r\n\r\n      document.body.appendChild(this.wrapper);\r\n      this.wrapper.appendChild(background);\r\n   }\r\n\r\n   /**\r\n    * Закрыть попап\r\n    */\r\n   close() {\r\n      document.body.removeChild(this.wrapper);\r\n   }\r\n}\r\n\r\n/**\r\n * для импорта через html запишем в глобальную переменную window\r\n */\r\n// if (window) {\r\n//    window.NicePopup = NicePopup;\r\n// }\r\n"]}